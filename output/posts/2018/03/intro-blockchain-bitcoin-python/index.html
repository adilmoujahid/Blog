<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Adil Moujahid, Bridging Tech and Art">


        
<style type="text/css">
pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: var(--jp-cell-editor-active-background) }
.highlight { background: var(--jp-cell-editor-background); color: var(--jp-mirror-editor-variable-color) }
.highlight .c { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment */
.highlight .err { color: var(--jp-mirror-editor-error-color) } /* Error */
.highlight .k { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword */
.highlight .o { color: var(--jp-mirror-editor-operator-color); font-weight: bold } /* Operator */
.highlight .p { color: var(--jp-mirror-editor-punctuation-color) } /* Punctuation */
.highlight .ch { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Multiline */
.highlight .cp { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Preproc */
.highlight .cpf { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Single */
.highlight .cs { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Special */
.highlight .kc { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Pseudo */
.highlight .kr { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Type */
.highlight .m { color: var(--jp-mirror-editor-number-color) } /* Literal.Number */
.highlight .s { color: var(--jp-mirror-editor-string-color) } /* Literal.String */
.highlight .ow { color: var(--jp-mirror-editor-operator-color); font-weight: bold } /* Operator.Word */
.highlight .pm { color: var(--jp-mirror-editor-punctuation-color) } /* Punctuation.Marker */
.highlight .w { color: var(--jp-mirror-editor-variable-color) } /* Text.Whitespace */
.highlight .mb { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Bin */
.highlight .mf { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Float */
.highlight .mh { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Hex */
.highlight .mi { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Integer */
.highlight .mo { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Oct */
.highlight .sa { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Affix */
.highlight .sb { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Backtick */
.highlight .sc { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Char */
.highlight .dl { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Delimiter */
.highlight .sd { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Doc */
.highlight .s2 { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Double */
.highlight .se { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Escape */
.highlight .sh { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Heredoc */
.highlight .si { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Interpol */
.highlight .sx { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Other */
.highlight .sr { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Regex */
.highlight .s1 { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Single */
.highlight .ss { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Symbol */
.highlight .il { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Integer.Long */
</style>

<style type="text/css">
/* Overrides of notebook CSS for static HTML export */
div.entry-content {
  overflow: visible;
  padding: 8px;
}
.input_area {
  padding: 0.2em;
}

a.heading-anchor {
 white-space: normal;
}

.rendered_html
code {
 font-size: .8em;
}

pre.ipynb {
  color: black;
  background: #f7f7f7;
  border: none;
  box-shadow: none;
  margin-bottom: 0;
  padding: 0;
  margin: 0px;
  font-size: 13px;
}

/* remove the prompt div from text cells */
div.text_cell .prompt {
    display: none;
}

/* remove horizontal padding from text cells, */
/* so it aligns with outer body text */
div.text_cell_render {
    padding: 0.5em 0em;
}

img.anim_icon{padding:0; border:0; vertical-align:middle; -webkit-box-shadow:none; -box-shadow:none}

div.collapseheader {
    width=100%;
    background-color:#d3d3d3;
    padding: 2px;
    cursor: pointer;
    font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;
}
</style>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        processEscapes: true,
        displayMath: [['$$','$$'], ["\\[","\\]"]]
    }
});
</script>
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

<script type="text/javascript">
jQuery(document).ready(function($) {
    $("div.collapseheader").click(function () {
    $header = $(this).children("span").first();
    $codearea = $(this).children(".input_area");
    console.log($(this).children());
    $codearea.slideToggle(500, function () {
        $header.text(function () {
            return $codearea.is(":visible") ? "Collapse Code" : "Expand Code";
        });
    });
});
});
</script>




        <title>A Practical Introduction to Blockchain with Python // Adil Moujahid // Bridging Tech and Art</title>



    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.3.0/pure-min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.1.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="../../../../theme/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../../../theme/css/pure.css">
    <link rel="stylesheet" href="../../../../theme/css/pygments.css">
    <link rel="stylesheet" href="../../../../theme/css/custom.css">

    <link rel="stylesheet" href="/css/blockchain.css" type="text/css" />
    <link rel="stylesheet" href="/css/ladda-themeless.min.css" type="text/css" />

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

    <script src="//load.sumome.com/" data-sumo-site-id="4ce3990f4d6fb482b4d97fa9208bd2242f7bb8c711ce30290794390dbe7ed180" async></script>

    <link rel="shortcut icon" type="image/x-icon" href="../../../../extra/favicon.ico" />

</head>

<body>
<div class="pure-g-r" id="layout">
    <div class="sidebar sidebar-article pure-u">
        <header class="header-article">
            <hgroup>
                <a href="../../../../author/adil-moujahid.html" title="See posts by Adil Moujahid">
                        <img class="avatar" alt="Adil Moujahid" src="http://www.gravatar.com/avatar/2ac2a00f5911cc8234778be41c835e13">
                </a>
                <h2 class="article-info">Adil Moujahid</h2>
                <small class="about-author"></small>

                <!-- ko-fi -->
                <div>
                    <a href='https://ko-fi.com/W7W4K1LZ' target='_blank'><img height='36' src='https://az743702.vo.msecnd.net/cdn/kofi4.png?v=0' style='border:0px;height:32px;' border='0' alt='Buy Me a Coffee at ko-fi.com' /></a>
                </div>
                <br>

                <div>
                <a href="https://twitter.com/AdilMouja" class="twitter-follow-button" data-show-count="false">
                    Follow @AdilMouja
                </a>
                <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
                </div>

                <h5>Published</h5>
                <p>Wed 14 March 2018</p>
                <a href="/">&larr;Home</a>
            </hgroup>
        </header>
    </div>
    <div class="pure-u">
        <div class="content">
            <section class="post">
                <header class="post-header">
                    <h1>A Practical Introduction to Blockchain with Python</h1>
                    <br>
                    <p class="post-meta">
                        // tags                             <a class="post-category" href="../../../../tag/python/">python</a>
                            <a class="post-category" href="../../../../tag/blockchain/">blockchain</a>
                    </p>
                </header>
            </section>
            <br>
            <p>Blockchain is arguably one of the most significant and disruptive technologies that came into existence since the inception of the Internet. It's the core technology behind Bitcoin and other crypto-currencies that drew a lot of attention in the last few years.</p>
<p>As its core, a blockchain is a distributed database that allows direct transactions between two parties without the need of a central authority. This simple yet powerful concept has great implications for various institutions such as banks, governments and marketplaces, just to name a few. Any business or organization that relies on a centralized database as a core competitive advantage can potentially be disrupted by blockchain technology.</p>
<p>Putting aside all the hype around the price of Bitcoin and other cryptocurrencies, the goal of this blog post is to give you a practical introduction to blockchain technology. Sections 1 and 2 cover some core concepts behind blockchain, while section 3 shows how to implement a blockchain using Python. We will also implement 2 web applications to make it easy for end users to interact with our blockchain.</p>
<p>Please note that I'm using Bitcoin here as a medium for explaning the more general technology of "Blockchain", and most of the concepts described in this post are applicable to other blockchain use cases and crypto-currencies. </p>
<p>Below is an animated gif of the two web apps that we will build in section 3.</p>
<div style="display:block;margin:auto;height:80%;width:80%">
  <img src="/images/blockchain-simulation.gif">
</div>

<h1>1. A Crash Course in Blockchain</h1>
<p>It all started with a white paper released in 2008 by an unknown person or entity using the name Satoshi Nakamoto. The white paper was titled <a href="https://bitcoin.org/bitcoin.pdf">“Bitcoin: A Peer-to-Peer Electronic Cash System”</a> and it laid the foundation of what later became known as Blockchain. In the original Bitcoin white paper, Satoshi described how to build a peer-to-peer electronic cash system that allows online payments to be sent directly from one party to another without going through a centralized institution. This system solves an important problem in digital money called double-spending.</p>
<h2>1.1. What is Double-Spending?</h2>
<p>Suppose that Alice wants to pay Bob 1$. If Alice and Bob use physical cash, then Alice will not longer have the 1$ after the transaction is executed. If Alice and Bob use digital money, then the problem gets more complicated. Digital money is in digital form and can be easily duplicated. If Alice sends a digital file worth 1$ to Bob by email for example, Bob cannot know for sure if Alice has deleted her copy of the file. If Alice still has the 1$ digital file, then she can choose to send the same file to Carol. This problem is called double-spending.</p>
<div style="text-align:center">
<p><img alt="Alt Text" src="/images/blockchain-double-spending.png"></p>
</div>
<p>One way of solving the double-spending problem is to have a trusted third party (a bank for example) between Alice, Bob and all other participants in the network. This third party is responsible for managing a centralized ledger that keeps track of and validates all the transactions in the network. The drawback of this solution is that for the system to function, it requires trust in a centralized third party.</p>
<h2>1.2. Bitcoin: A Decentralized Solution for the Double-Spending Problem</h2>
<p>To solve the double-spending problem, Satoshi proposed a public ledger, i.e., Bitcoin’s blockchain to keep track  of all transactions in the network. Bitcoin’s blockchain has the following characteristics:</p>
<ul>
<li>Distributed:  The ledger is replicated across a number of computers, rather than being stored on a central server. Any computer with an internet connection can download a full copy of the blockchain.</li>
<li>Cryptographic: Cryptography is used to make sure that the sender owns the bitcoin that she's trying to send, and to decide how the transactions are added to the blockchain.</li>
<li>Immutable: The blockchain can be changed in append only fashion. In other words, transactions can only be added to the blockchain but cannot be deleted or modified. </li>
<li>Uses Proof of Work (PoW): A special type of participants in the network called miners compete on searching for the solution to a cryptographic puzzle that will allow them to add a block of transactions to Bitcoin’s blockchain. This process is called Proof of Work and it allows the system to be secure (more on this later).</li>
</ul>
<div style="text-align:center">
<p><img alt="Alt Text" src="/images/blockchain-cash-bitcoin.png"></p>
</div>
<p>Sending bitcoin money goes as follows: </p>
<ul>
<li>Step 1 (one-time effort): Create a bitcoin wallet. For a person to send or receive bitcoins, she needs to create a bitcoin wallet. A bitcoin wallet stores 2 pieces of information: A private key and a public key. The private key is a secret number that allows the owner to send bitcoin to another user, or spend bitcoins on services that accept them as payment method. The public key is a number that is needed to receive bitcoins. The public key is also referred to as bitcoin address (not entirely true, but for simplicity we will assume that the public key and the bitcoin address are the same). Note that the wallet doesn’t store the bitcoins themselves. Information about bitcoins balances are stored on the Bitcoin’s blockchain. </li>
<li>Step 2: Create a bitcoin transaction. If Alice wants to send 1 BTC to Bob, Alice needs to connect to her bitcoin wallet using her private key, and create a transaction that contains the amount of bitcoins she wants to send and the address where she wants to send them (in this case Bob’s public address). </li>
<li>Step 3: Broadcast the transaction to Bitcoin’s network. Once Alice creates the bitcoin transaction, she needs to broadcast this transaction to the entire Bitcoin’s network.</li>
<li>Step 4: Confirm the transaction. A miner listening to Bitcoin’s network authenticates the transaction using Alice's public key, confirms that Alice has enough bitcoins in her wallet (in this case at least 1 BTC), and adds a new record to Bitcoin’s Blockchain containing the details of the transaction. </li>
<li>Step 5: Broadcast the blockchain change to all miners. Once the transaction is confirmed, the miner should broadcast the blockchain change to all miners to make sure that their copies of the blockchain are all in sync.</li>
</ul>
<h1>2. A Technical Deep Dive on Blockchain</h1>
<p>The goal of this section is to go deeper into the technical building blocks that power the blockchain. We will cover public key cryptography, hashing functions, mining and security of the blockchain.</p>
<h2>2.1. Public Key Cryptography</h2>
<p>Public-key cryptography, or asymmetrical cryptography, is any cryptographic system that uses pairs of keys: public keys which may be disseminated widely, and private keys which are known only to the owner. This accomplishes two functions: authentication, where the public key verifies a holder of the paired private key sent the message, and encryption, where only the paired private key holder can decrypt the message encrypted with the public key. [1]</p>
<p><a href="https://en.wikipedia.org/wiki/RSA_(cryptosystem)">RSA</a> and <a href="https://en.wikipedia.org/wiki/Elliptic_Curve_Digital_Signature_Algorithm">Elliptic Curve Digital Signature (ECDSA)</a> are the most popular public-key cryptography algorithms. </p>
<p>In the case of Bitcoin, ECDSA algorithm is used to generate Bitcoin wallets. Bitcoin uses a variety of keys and addresses, but for the sake of simplicity, we will assume in this blog post that each Bitcoin wallet has one pair of private/public keys and that a Bitcoin address is the wallet's public key. I recommend this <a href="https://en.bitcoin.it/wiki/Technical_background_of_version_1_Bitcoin_addresses">article</a>, if you're interested in the complete technical details of Bitcoin wallets. </p>
<p>To send or receive BTCs, a user starts by generating a wallet which contains a pair of private and public keys. If Alice wants to send Bob some BTCs, she creates a transaction in which she enters both her and Bob's public keys, and the amount of BTCs she wants to send. She then sign the transaction using her private key. A computer on the blockchain uses Alice's public key to verify that the transaction is authentic and adds the transaction to a block that will be later added to the blockchain. </p>
<div style="text-align:center">
<p><img alt="Alt Text" src="/images/blockchain-public-crypto.png"></p>
</div>
<h2>2.2. Hashing Functions and Mining</h2>
<p>All Bitcoin transactions are grouped in files called blocks.  Bitcoin adds a new block of transactions every 10 minutes. Once a new block is added to the blockchain, it becomes immutable and can't be deleted or modified.
A special group of participants in the network called miners (computers connected to the blockchain) are responsible for creating new blocks of transactions. A miner has to authenticate each transaction using the sender's public key, confirm that the sender has enough balance for the requested transaction, and add the transaction to the block. 
Miners are completely free to choose which transactions to include in the blocks, therefore the senders need to include a transaction fee to incentivise the miners to add their transactions to the blocks. </p>
<p>For a block to be accepted by the blockchain, it needs to be "mined". To mine a block, miners need to find an extremely rare solution to a cryptographic puzzle. If a mined block is accepted by the blockchain, the miner receive a reward in bitcoins which is an additional incentive to transaction fees. The mining process is also referred to as Proof of Work (PoW), and it's the main mechanism that enables the blockchain to be trustless and secure (more on blockchain security later).</p>
<h3>Hashing and Blockchain's Cryptographic Puzzle</h3>
<p>To understand the blockchain's cryptographic puzzle, we need to start with hash functions. A hash function is any function that can be used to map data of arbitrary size to data of fixed size. The values returned by a hash function are called hashes. Hash functions are usually used to accelerate database lookup by detecting duplicated records, and they are also widely used in cryptography.  A cryptographic hash function allows one to easily verify that some input data maps to a given hash value, but if the input data is unknown, it is deliberately difficult to reconstruct it by knowing the stored hash value. [2]</p>
<p>Bitcoins uses a cryptographic hash function called SHA-256. SHA-256 is applied to a combination of the block's data (bitcoin transactions) and a number called nonce. By changing the block data or the nonce, we get completely different hashes. For a block to be considered valid or "mined", the hash value of the block and the nonce needs to meet a certain condition. For example, the four leading digits of the hash needs to be equal to "0000". We can increase the mining complexity by making the condition more complex, for example we can increase the number of 0s that the hash value needs to start with.</p>
<p>The cryptograhic puzzle that miners need to solve is to find a nonce value that makes the hash value satisfies the mining condition. You can use the app below to simulate block mining. When you type in the "Data" text box or change the nonce value, you can notice the change in the hash value. When you click the "Mine" button, the app starts with a nonce equals to zero, computes the hash value and checks if the leading four digits of the hash value is equal to "0000". If the leading  four digits are not equal to "0000", it increments the nonce by one and repeats the whole process until it finds a nonce value that satisify the condition. If the block is considered mined, the background color turns green.</p>
<div class="container col-sm-12">
<div id="block0chain0well" class="well">
<form class="form-horizontal">

  <div class="form-group">
    <label for="block0chain0nonce" class="col-sm-2 control-label">
      Nonce:
    </label>
    <div class="col-sm-10"><input id="block0chain0nonce" type="text" value="72608" onkeyup="updateHash(0, 0);" class="form-control">
    </div>
  </div>

  <div class="form-group">
    <label for="block0chain0data" class="col-sm-2 control-label">
      Data:
    </label>
    <div class="col-sm-10">
      <textarea id="block0chain0data" rows="2" onkeyup="updateHash(0, 0);" class="form-control"></textarea>
    </div>
  </div>

  <div id="state" class="form-group">
    <label for="block0chain0hash" class="col-sm-2 control-label">
      Hash:
    </label>
    <div class="col-sm-10">
      <input id="block0chain0hash" type="text" disabled class="form-control">
    </div>
  </div>

<div class="form-group">
  <div class="col-sm-2">
    <i class="icon-spinner icon-spin icon-large"></i>
  </div>
  <div class="col-sm-10">
    <button id="block0chain0mineButton" data-style="expand-right" class="btn btn-primary ladda-button">
      <span class="ladda-label">
        Mine
      </span>
    </button>
  </div>
</div>

</form>
</div>
</div>

<script>
  $(function() {
    mineButtonAnimation(0, 0);
    updateHash(0, 0);
  });

  function getText(block, chain) {
    return $('#block'+block+'chain'+chain+'nonce').val() +
           $('#block'+block+'chain'+chain+'data').val();
  }

  function mineButtonAnimation(block, chain) {
    $('#block'+block+'chain'+chain+'mineButton').click(function(e) {
        e.preventDefault();
        var l = Ladda.create(this);
        l.start();
        setTimeout(function() {
            mine(block, chain, false);
            l.stop();
          }, 250); // give UI time to update
      });
  }
</script>

<h2>2.3. From Blocks to Blockchain</h2>
<p>As discussed in the previous section, transactions are grouped in blocks and blocks are appended to the blockchain. In order to create a chain of blocks, each new block uses the previous block’s hash as part of its data. To create a new block, a miner selects a set of transactions, adds the previous block’s hash and mines the block in a similar fashion described above. </p>
<p>Any changes to the data in any block will affect all the hash values of the blocks that come after it and they will become invalid. This give the blockchain its immutability characteristic. </p>
<div style="text-align:center">
<p><img alt="Alt Text" src="/images/blockchain-from-blocks.png"></p>
</div>
<p>You can use the app below to simulate a blockchain with 3 blocks. When you type in the "Data" text box or change the nonce value, you can notice the change in the hash value and the "Prev" value (previous hash) of the next block. You can simulate the mining process by clicking on the “Mine” button of each individual block. After mining the 3 blocks, try changing the data in block 1 or 2, and you will notice that all the blocks that come after become invalid.</p>
<div class="container col-sm-12">

  <div id="block1chain1well" class="well">
    <form class="form-horizontal">
      <div class="form-group">
        <label for="block1chain1number" class="col-sm-2 control-label">Block:</label>
        <div class="col-sm-10"><div class="input-group">
          <span class="input-group-addon">#</span>
          <input id="block1chain1number" type="text" value="1" onkeyup="updateChain(1, 1);" class="form-control">
          </div>
        </div>
      </div>
      <div class="form-group">
        <label for="block1chain1nonce" class="col-sm-2 control-label">Nonce:</label>
        <div class="col-sm-10">
          <input id="block1chain1nonce" type="text" value="1131" onkeyup="updateChain(1, 1);" class="form-control">
        </div>
      </div>
      <div class="form-group">
        <label for="block1chain1data" class="col-sm-2 control-label">Data:</label>
        <div class="col-sm-10">
          <textarea id="block1chain1data" rows="2" onkeyup="updateChain(1, 1);" class="form-control"></textarea>
        </div>
      </div>

      <div id="state" class="form-group">
        <label for="block1chain1previous" class="col-sm-2 control-label">Prev:</label>
        <div class="col-sm-10">
          <input id="block1chain1previous" type="text" value="0000000000000000000000000000000000000000000000000000000000000000" disabled class="form-control">
        </div>
      </div>
      <div id="state" class="form-group">
        <label for="block1chain1hash" class="col-sm-2 control-label">Hash:</label>
        <div class="col-sm-10">
          <input id="block1chain1hash" type="text" disabled class="form-control">
        </div>
      </div>
      <div class="form-group">
        <div class="col-sm-2">
          <i class="icon-spinner icon-spin icon-large"></i>
        </div>
        <div class="col-sm-10">
          <button id="block1chain1mineButton" data-style="expand-right" class="btn btn-primary ladda-button">
            <span class="ladda-label">
              Mine
            </span>
          </button>
        </div>
      </div>
    </form>
  </div>

  <div id="block2chain1well" class="well">
    <form class="form-horizontal">
      <div class="form-group">
        <label for="block2chain1number" class="col-sm-2 control-label">Block:</label>
        <div class="col-sm-10">
          <div class="input-group">
            <span class="input-group-addon">#</span>
            <input id="block2chain1number" type="text" value="2" onkeyup="updateChain(2, 1);" class="form-control">
          </div>
        </div>
      </div>
      <div class="form-group">
        <label for="block2chain1nonce" class="col-sm-2 control-label">Nonce:</label>
        <div class="col-sm-10">
          <input id="block2chain1nonce" type="text" value="35230" onkeyup="updateChain(2, 1);" class="form-control">
        </div>
      </div>
      <div class="form-group">
        <label for="block2chain1data" class="col-sm-2 control-label">Data:</label>
        <div class="col-sm-10">
          <textarea id="block2chain1data" rows="2" onkeyup="updateChain(2, 1);"  class="form-control"></textarea>
        </div>
      </div>
      <div id="state" class="form-group">
        <label for="block2chain1previous" class="col-sm-2 control-label">Prev:</label>
        <div class="col-sm-10">
          <input id="block2chain1previous" type="text" value="432315783b764259d382017d91a36d206d0600e2cbb3567748f46a33fe9297cf" disabled class="form-control">
        </div>
      </div>
      <div id="state" class="form-group">
        <label for="block2chain1hash" class="col-sm-2 control-label">Hash:</label>
        <div class="col-sm-10">
          <input id="block2chain1hash" type="text" disabled class="form-control">
        </div>
      </div>
      <div class="form-group">
        <div class="col-sm-2">
          <i class="icon-spinner icon-spin icon-large"></i>
        </div>
        <div class="col-sm-10">
          <button id="block2chain1mineButton" data-style="expand-right" class="btn btn-primary ladda-button">
            <span class="ladda-label">Mine</span>
          </button>
        </div>
      </div>
    </form>
  </div>

  <div id="block3chain1well" class="well">
    <form class="form-horizontal">
      <div class="form-group">
        <label for="block3chain1number" class="col-sm-2 control-label">Block:</label>
        <div class="col-sm-10">
          <div class="input-group">
            <span class="input-group-addon">#</span>
            <input id="block3chain1number" type="text" value="3" onkeyup="updateChain(3, 1);" class="form-control">
          </div>
        </div>
      </div>
      <div class="form-group">
        <label for="block3chain1nonce" class="col-sm-2 control-label">Nonce:</label>
        <div class="col-sm-10">
          <input id="block3chain1nonce" type="text" value="12937" onkeyup="updateChain(3, 1);" class="form-control">
        </div>
      </div>
      <div class="form-group">
        <label for="block3chain1data" class="col-sm-2 control-label">Data:</label>
        <div class="col-sm-10">
          <textarea id="block3chain1data" rows="2" onkeyup="updateChain(3, 1);" class="form-control"></textarea>
        </div>
      </div>
      <div id="state" class="form-group">
        <label for="block3chain1previous" class="col-sm-2 control-label">Prev:</label>
        <div class="col-sm-10">
          <input id="block3chain1previous" type="text" value="546712fa9b916eb9078f8d98a7864e697ae83ed54f5146bd84452cdafd043c19" disabled class="form-control">
        </div>
      </div>
      <div id="state" class="form-group">
        <label for="block3chain1hash" class="col-sm-2 control-label">Hash:</label>
        <div class="col-sm-10">
          <input id="block3chain1hash" type="text" disabled class="form-control">
        </div>
      </div>
      <div class="form-group">
        <div class="col-sm-2">
          <i class="icon-spinner icon-spin icon-large"></i>
        </div>
        <div class="col-sm-10">
          <button id="block3chain1mineButton" data-style="expand-right" class="btn btn-primary ladda-button">
            <span class="ladda-label">Mine</span>
          </button>
        </div>
      </div>
    </form>
  </div>

</div>

<script>$(function() {
  setup(1, 1);
  setup(2, 1);
  setup(3, 1);
});

function getText(block, chain) {
  return $('#block'+block+'chain'+chain+'number').val() +
         $('#block'+block+'chain'+chain+'nonce').val() +
         $('#block'+block+'chain'+chain+'data').val() +
         $('#block'+block+'chain'+chain+'previous').val();
}

function setup(block, chain) {
  updateHash(block, chain);
  $('#block'+block+'chain'+chain+'mineButton').click(function(e) {
      e.preventDefault();
      var l = Ladda.create(this);
      l.start();
      setTimeout(function() {
          mine(block, chain, true);
          l.stop();
        }, 250); // give UI time to update
    });
}</script>

<p>Both mining simulators above were adapted from Anders Brownworth's excellent <a href="https://anders.com/blockchain/blockchain.html">Blockchain Demo</a>.</p>
<h2>2.4. Adding Blocks to the Blockchain</h2>
<p>All the miners in the Bitcoin network compete with each other to find a valid block that will be added to the blockchain and get the reward from the network. Finding a nonce that validated a block is rare, but because of the number of miners, the probability of a miner in the network validating a block is extremely high. The first miner to submit a valid block gets his block added to the blockchain and receives the reward in bitcoins. But what happens if two miners or more submit their blocks at the same time?</p>
<h3>Resolving Conflicts</h3>
<p>If 2 miners solve a block at almost the same time, then we will have 2 different blockchains in the network, and we need to wait for the next block to resolve the conflict. Some miners will decide to mine on top of blockchain 1 and others on top of blockchain 2. The first miner to find a new block resolves the conflict. If the new block was mined on top of blockchain 1, then blockchain 2 becomes invalid, the reward of the previous block goes to the miner from blockchain 1 and the transactions that were part of blockchain 2 and weren’t added to the blockchain go back to the transactions pool and get added to the next blocks. In short, if there is a conflict on the blockchain, then the the longest chain wins.</p>
<div style="text-align:center">
<p><img alt="Alt Text" src="/images/blockchain-the-longest-chain-wins.png"></p>
</div>
<h2>2.5. Blockchain and Double-Spending</h2>
<p>In this section, we will cover the most popular ways for performing double-spending attacks on the blockchain, and the measures that users should take to prevent damages from them.</p>
<h3>Race Attack</h3>
<p>An attacker sends the same coin in rapid succession to two different addresses. To prevent from this attack, it is recommended to wait for at least one block confirmation before accepting the payment. [3]</p>
<h3>Finney Attack</h3>
<p>An attacker pre-mines a block with a transaction, and spends the same coins in a second transaction before releasing the block. In this scenario, the second transaction will not be validated. To prevent from this attack, it is recommended to wait for at least 6 block confirmations before accepting the payment. [3] </p>
<h3>Majority Attack (also called 51% attack)</h3>
<p>In this attack, the attacker owns 51% of the computing power of the network. The attacker starts by making a transaction that is brodcasted to the entire network, and then mines a private blockchain where he double-spends the coins of the previous transaction. Since the attacker owns the majority of the computing power, he is guaranteed that he will have at some point a longer chain than the "honest" network. He can then release his longer blockchain that will replace the "honest" blockchain and cancel the original transaction. This attack is highly unlikely, as it’s very expensive in blockchain networks like Bitcoin. [4]</p>
<h1>3. A Blockchain Implementation in Python</h1>
<p>In this section, we will implement a basic blockchain and a blockchain client using Python. Our blockchain will have the following features:</p>
<ul>
<li>Possibility of adding multiple nodes to the blockchain</li>
<li>Proof of Work (PoW)</li>
<li>Simple conflict resolution between nodes</li>
<li>Transactions with RSA encryption</li>
</ul>
<p>Our blockchain client will have the following features:</p>
<ul>
<li>Wallets generation using Public/Private key encryption (based on RSA algorithm)</li>
<li>Generation of transactions with RSA encryption </li>
</ul>
<p>We will also implement 2 dashboards: </p>
<ul>
<li>"Blockchain Frontend" for miners </li>
<li>"Blockchain Client" for users to generate wallets and send coins </li>
</ul>
<p>The blockchain implementation is mostly based on this <a href="https://github.com/dvf/blockchain">github project</a>. I made a few modifications to the original code in order to add RSA encryption to the transactions. Wallet generation and transaction encryption is based on this <a href="https://github.com/julienr/ipynb_playground/blob/master/bitcoin/dumbcoin/dumbcoin.ipynb">Jupyter notebook</a>. The 2 dashboard are implemented from scratch using HTML/CSS/JS.</p>
<p>You can download the complete source code from <a href="https://github.com/adilmoujahid/blockchain-python-tutorial">https://github.com/adilmoujahid/blockchain-python-tutorial</a>.</p>
<p>Please note that this implementation is for educational purposes only and shouldn't be use in production as it doesn't have good security, doesn't scale well and lacks many important features.</p>
<h2>3.1. Blockchain Client Implementation</h2>
<p>You can start the blockchain client from the terminal by going to the <code>blockchain_client</code> folder, and typing <code>python blockchain_client.py</code>. In your browser, go to <code>http://localhost:8080</code> and you'll see the dashboard below.</p>
<div style="display:block;margin:auto;height:80%;width:80%">
  <img src="/images/blockchain-client.png">
</div>

<p><br></p>
<p>The dashboard has 3 tabs in the navigation bar:</p>
<ul>
<li>Wallet Generator: To generate wallets (Public/Private keys pair) using RSA encryption algorithm</li>
<li>Make Transaction: To generate transactions and send them to a blockchain node</li>
<li>View Transasctions: To view the transactions that are on the blockchain</li>
</ul>
<p>In order to make or view transactions, you will need at least one blockchain node running (to be covered in next section).</p>
<p>Below is some explanation of the most important parts in the <code>blockchain_client.py</code> code.</p>
<p>We define a python class that we name <code>Transaction</code> that has 4 attributes <code>sender_address</code>, <code>sender_private_key</code>, <code>recipient_address</code>, <code>value</code>. These are the 4 pieces of information that a sender needs to create a transaction. </p>
<p>The <code>to_dict()</code> method returns the transaction information in a Python dictionary format (without the sender's private key). The <code>sign_transaction()</code> method takes the transaction information (without the sender's private key) and signs it using the sender's private key.</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Transaction</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sender_address</span><span class="p">,</span> <span class="n">sender_private_key</span><span class="p">,</span> <span class="n">recipient_address</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sender_address</span> <span class="o">=</span> <span class="n">sender_address</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sender_private_key</span> <span class="o">=</span> <span class="n">sender_private_key</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">recipient_address</span> <span class="o">=</span> <span class="n">recipient_address</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">attr</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">OrderedDict</span><span class="p">({</span><span class="s1">&#39;sender_address&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">sender_address</span><span class="p">,</span>
                            <span class="s1">&#39;recipient_address&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">recipient_address</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">})</span>

    <span class="k">def</span> <span class="nf">sign_transaction</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sign transaction with private key</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">private_key</span> <span class="o">=</span> <span class="n">RSA</span><span class="o">.</span><span class="n">importKey</span><span class="p">(</span><span class="n">binascii</span><span class="o">.</span><span class="n">unhexlify</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sender_private_key</span><span class="p">))</span>
        <span class="n">signer</span> <span class="o">=</span> <span class="n">PKCS1_v1_5</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">private_key</span><span class="p">)</span>
        <span class="n">h</span> <span class="o">=</span> <span class="n">SHA</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf8&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">binascii</span><span class="o">.</span><span class="n">hexlify</span><span class="p">(</span><span class="n">signer</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">h</span><span class="p">))</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>
</code></pre></div>

<p>The line below initate a <code>Python Flask</code> app that we will use to create different APIs to interact with the blockchain and its client.</p>
<div class="highlight"><pre><span></span><code><span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
</code></pre></div>

<p>Below we define the 3 <code>Flask</code> routes that returns html pages. One html page for each tab.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
  <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;./index.html&#39;</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/make/transaction&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">make_transaction</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;./make_transaction.html&#39;</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/view/transactions&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">view_transaction</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;./view_transactions.html&#39;</span><span class="p">)</span>
</code></pre></div>

<p>Below we define an API that generates wallets (Private/Public keys pairs).</p>
<div class="highlight"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/wallet/new&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">new_wallet</span><span class="p">():</span>
  <span class="n">random_gen</span> <span class="o">=</span> <span class="n">Crypto</span><span class="o">.</span><span class="n">Random</span><span class="o">.</span><span class="n">new</span><span class="p">()</span><span class="o">.</span><span class="n">read</span>
  <span class="n">private_key</span> <span class="o">=</span> <span class="n">RSA</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="mi">1024</span><span class="p">,</span> <span class="n">random_gen</span><span class="p">)</span>
  <span class="n">public_key</span> <span class="o">=</span> <span class="n">private_key</span><span class="o">.</span><span class="n">publickey</span><span class="p">()</span>
  <span class="n">response</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;private_key&#39;</span><span class="p">:</span> <span class="n">binascii</span><span class="o">.</span><span class="n">hexlify</span><span class="p">(</span><span class="n">private_key</span><span class="o">.</span><span class="n">exportKey</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s1">&#39;DER&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">),</span>
    <span class="s1">&#39;public_key&#39;</span><span class="p">:</span> <span class="n">binascii</span><span class="o">.</span><span class="n">hexlify</span><span class="p">(</span><span class="n">public_key</span><span class="o">.</span><span class="n">exportKey</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s1">&#39;DER&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">response</span><span class="p">),</span> <span class="mi">200</span>
</code></pre></div>

<p><br></p>
<div style="display:block;margin:auto;height:80%;width:80%">
  <img src="/images/blockchain-generate-wallet.gif">
</div>

<p><br></p>
<p>Below we define an API that takes as input <code>sender_address</code>, <code>sender_private_key</code>, <code>recipient_address</code>, <code>value</code>, and returns the transaction (without private key) and the signature.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/generate/transaction&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">generate_transaction</span><span class="p">():</span>

  <span class="n">sender_address</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;sender_address&#39;</span><span class="p">]</span>
  <span class="n">sender_private_key</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;sender_private_key&#39;</span><span class="p">]</span>
  <span class="n">recipient_address</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;recipient_address&#39;</span><span class="p">]</span>
  <span class="n">value</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;amount&#39;</span><span class="p">]</span>

  <span class="n">transaction</span> <span class="o">=</span> <span class="n">Transaction</span><span class="p">(</span><span class="n">sender_address</span><span class="p">,</span> <span class="n">sender_private_key</span><span class="p">,</span> <span class="n">recipient_address</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

  <span class="n">response</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;transaction&#39;</span><span class="p">:</span> <span class="n">transaction</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span> <span class="s1">&#39;signature&#39;</span><span class="p">:</span> <span class="n">transaction</span><span class="o">.</span><span class="n">sign_transaction</span><span class="p">()}</span>

  <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">response</span><span class="p">),</span> <span class="mi">200</span>
</code></pre></div>

<p><br></p>
<div style="display:block;margin:auto;height:80%;width:80%">
  <img src="/images/blockchain-generate-transaction.gif">
</div>

<p><br></p>
<h2>3.2. Blockchain Implementation</h2>
<p>You can start a blockchain node from the terminal by going to the <code>blockchain</code> folder, and type <code>python blockchain_client.py</code> or <code>python blockchain_client.py  -p &lt;PORT NUMBER&gt;</code>. If you don't specify a port number, it will default to port 5000. In your browser, go to <code>http://localhost:&lt;PORT NUMBER&gt;</code> to see the blockchain frontend dashboard.</p>
<div style="display:block;margin:auto;height:80%;width:80%">
  <img src="/images/blockchain-frontend.png">
</div>

<p><br></p>
<p>The dashboard has 2 tabs in the navigation bar:</p>
<ul>
<li>Mine: For viewing transactions and blockchain data, and for mining new blocks of transactions.</li>
<li>Configure: For configuring connections between the different blockchain nodes.</li>
</ul>
<p>Below is some explanation of the most important parts in the <code>blockchain.py</code> code.</p>
<p>We start by defining a <code>Blockchain</code> class that has the following attributes:</p>
<ul>
<li><code>transactions</code>: List of transactions that will be added to the next block.</li>
<li><code>chain</code>: The actual blockchain which is an array of blocks.</li>
<li><code>nodes</code>: A set containing node urls. The blockchain uses these nodes to retrieve blockchain data from other nodes and updates its blockchain if they're not in sync.</li>
<li><code>node_id</code>: A random string to identify the blockchain node.</li>
</ul>
<p>The <code>Blockchain</code> class also implements the following methods:</p>
<ul>
<li><code>register_node(node_url)</code>: Adds a new blockchain node to the list of nodes.</li>
<li><code>verify_transaction_signature(sender_address, signature, transaction)</code>: Checks that the provided signature corresponds to transaction signed by the public key (sender_address).</li>
<li><code>submit_transaction(sender_address, recipient_address, value, signature)</code>: Adds a transaction to list of transactions if the signature verified.</li>
<li><code>create_block(nonce, previous_hash)</code>: Adds a block of transactions to the blockchain.</li>
<li><code>hash(block)</code>: Create a SHA-256 hash of a block.</li>
<li><code>proof_of_work()</code>: Proof of work algorithm. Looks for a nonce that satisfies the mining condition.</li>
<li><code>valid_proof(transactions, last_hash, nonce, difficulty=MINING_DIFFICULTY)</code>: Checks if a hash value satisfies the mining conditions. This function is used within the proof_of_work function.</li>
<li><code>valid_chain(chain)</code>: checks if a bockchain is valid.</li>
<li><code>resolve_conflicts()</code>: Resolves conflicts between blockchain's nodes by replacing a chain with the longest one in the network.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Blockchain</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">transactions</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">chain</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="c1">#Generate random number to be used as node_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">node_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid4</span><span class="p">())</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="c1">#Create genesis block</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_block</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;00&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">register_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_url</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a new node to the list of nodes</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="nf">verify_transaction_signature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sender_address</span><span class="p">,</span> <span class="n">signature</span><span class="p">,</span> <span class="n">transaction</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check that the provided signature corresponds to transaction</span>
<span class="sd">        signed by the public key (sender_address)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="nf">submit_transaction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sender_address</span><span class="p">,</span> <span class="n">recipient_address</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">signature</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a transaction to transactions array if the signature verified</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="nf">create_block</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nonce</span><span class="p">,</span> <span class="n">previous_hash</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a block of transactions to the blockchain</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="nf">hash</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">block</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a SHA-256 hash of a block</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="nf">proof_of_work</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Proof of work algorithm</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="nf">valid_proof</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transactions</span><span class="p">,</span> <span class="n">last_hash</span><span class="p">,</span> <span class="n">nonce</span><span class="p">,</span> <span class="n">difficulty</span><span class="o">=</span><span class="n">MINING_DIFFICULTY</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if a hash value satisfies the mining conditions. This function is used within the proof_of_work function.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="nf">valid_chain</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">chain</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        check if a bockchain is valid</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="nf">resolve_conflicts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Resolve conflicts between blockchain&#39;s nodes</span>
<span class="sd">        by replacing our chain with the longest one in the network.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="o">...</span>
</code></pre></div>

<p>The line below initate a <code>Python Flask</code> app that we will use to create different APIs to interact with the blockchain.</p>
<div class="highlight"><pre><span></span><code><span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">CORS</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
</code></pre></div>

<p>Next, we initiate a Blockchain instance.</p>
<div class="highlight"><pre><span></span><code><span class="n">blockchain</span> <span class="o">=</span> <span class="n">Blockchain</span><span class="p">()</span>
</code></pre></div>

<p>Below we define the 2 <code>Flask</code> routes that return the html pages for our blockchain frontend dashboard.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;./index.html&#39;</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/configure&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">configure</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;./configure.html&#39;</span><span class="p">)</span>
</code></pre></div>

<p>Below we define <code>Flask</code> APIs to manage transactions and mining the blockchain.</p>
<ul>
<li><code>'/transactions/new'</code>: This API takes as input <code>'sender_address'</code>, <code>'recipient_address'</code>, <code>'amount'</code> and <code>'signature'</code>, and adds the transaction to the list of transactions that will be added to next block if the signature is valid.</li>
<li><code>'/transactions/get'</code>: This API returns all the transactions that will be added to the next block.</li>
<li><code>'/chain'</code>: This API returns all blockchain data.</li>
<li><code>'/mine'</code>: This API runs the proof of work algorithm, and adds the new block of transactions to the blockchain.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/transactions/new&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">new_transaction</span><span class="p">():</span>
    <span class="n">values</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span>

    <span class="c1"># Check that the required fields are in the POST&#39;ed data</span>
    <span class="n">required</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;sender_address&#39;</span><span class="p">,</span> <span class="s1">&#39;recipient_address&#39;</span><span class="p">,</span> <span class="s1">&#39;amount&#39;</span><span class="p">,</span> <span class="s1">&#39;signature&#39;</span><span class="p">]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">k</span> <span class="ow">in</span> <span class="n">values</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">required</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;Missing values&#39;</span><span class="p">,</span> <span class="mi">400</span>
    <span class="c1"># Create a new Transaction</span>
    <span class="n">transaction_result</span> <span class="o">=</span> <span class="n">blockchain</span><span class="o">.</span><span class="n">submit_transaction</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s1">&#39;sender_address&#39;</span><span class="p">],</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;recipient_address&#39;</span><span class="p">],</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;amount&#39;</span><span class="p">],</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;signature&#39;</span><span class="p">])</span>

    <span class="k">if</span> <span class="n">transaction_result</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Invalid Transaction!&#39;</span><span class="p">}</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">response</span><span class="p">),</span> <span class="mi">406</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Transaction will be added to Block &#39;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">transaction_result</span><span class="p">)}</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">response</span><span class="p">),</span> <span class="mi">201</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/transactions/get&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">get_transactions</span><span class="p">():</span>
    <span class="c1">#Get transactions from transactions pool</span>
    <span class="n">transactions</span> <span class="o">=</span> <span class="n">blockchain</span><span class="o">.</span><span class="n">transactions</span>

    <span class="n">response</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;transactions&#39;</span><span class="p">:</span> <span class="n">transactions</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">response</span><span class="p">),</span> <span class="mi">200</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/chain&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">full_chain</span><span class="p">():</span>
    <span class="n">response</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;chain&#39;</span><span class="p">:</span> <span class="n">blockchain</span><span class="o">.</span><span class="n">chain</span><span class="p">,</span>
        <span class="s1">&#39;length&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">blockchain</span><span class="o">.</span><span class="n">chain</span><span class="p">),</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">response</span><span class="p">),</span> <span class="mi">200</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/mine&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">mine</span><span class="p">():</span>
    <span class="c1"># We run the proof of work algorithm to get the next proof...</span>
    <span class="n">last_block</span> <span class="o">=</span> <span class="n">blockchain</span><span class="o">.</span><span class="n">chain</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">nonce</span> <span class="o">=</span> <span class="n">blockchain</span><span class="o">.</span><span class="n">proof_of_work</span><span class="p">()</span>

    <span class="c1"># We must receive a reward for finding the proof.</span>
    <span class="n">blockchain</span><span class="o">.</span><span class="n">submit_transaction</span><span class="p">(</span><span class="n">sender_address</span><span class="o">=</span><span class="n">MINING_SENDER</span><span class="p">,</span> <span class="n">recipient_address</span><span class="o">=</span><span class="n">blockchain</span><span class="o">.</span><span class="n">node_id</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">MINING_REWARD</span><span class="p">,</span> <span class="n">signature</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

    <span class="c1"># Forge the new Block by adding it to the chain</span>
    <span class="n">previous_hash</span> <span class="o">=</span> <span class="n">blockchain</span><span class="o">.</span><span class="n">hash</span><span class="p">(</span><span class="n">last_block</span><span class="p">)</span>
    <span class="n">block</span> <span class="o">=</span> <span class="n">blockchain</span><span class="o">.</span><span class="n">create_block</span><span class="p">(</span><span class="n">nonce</span><span class="p">,</span> <span class="n">previous_hash</span><span class="p">)</span>

    <span class="n">response</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;New Block Forged&quot;</span><span class="p">,</span>
        <span class="s1">&#39;block_number&#39;</span><span class="p">:</span> <span class="n">block</span><span class="p">[</span><span class="s1">&#39;block_number&#39;</span><span class="p">],</span>
        <span class="s1">&#39;transactions&#39;</span><span class="p">:</span> <span class="n">block</span><span class="p">[</span><span class="s1">&#39;transactions&#39;</span><span class="p">],</span>
        <span class="s1">&#39;nonce&#39;</span><span class="p">:</span> <span class="n">block</span><span class="p">[</span><span class="s1">&#39;nonce&#39;</span><span class="p">],</span>
        <span class="s1">&#39;previous_hash&#39;</span><span class="p">:</span> <span class="n">block</span><span class="p">[</span><span class="s1">&#39;previous_hash&#39;</span><span class="p">],</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">response</span><span class="p">),</span> <span class="mi">200</span>
</code></pre></div>

<p><br></p>
<div style="display:block;margin:auto;height:80%;width:80%">
  <img src="/images/blockchain-mine.gif">
</div>

<p><br></p>
<p>Below we define Flask APIs to manage blockchain nodes.</p>
<ul>
<li><code>'/nodes/register'</code>: This API takes as input a list of node urls, and adds them to the list of nodes.</li>
<li><code>'/nodes/resolve'</code>: This API resolves conflicts between blockchain nodes by replacing a local chain with the longest one available in the network.</li>
<li><code>'/nodes/get'</code>: This API returns the list of nodes.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/nodes/register&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">register_nodes</span><span class="p">():</span>
    <span class="n">values</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span>
    <span class="n">nodes</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;nodes&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">nodes</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;Error: Please supply a valid list of nodes&quot;</span><span class="p">,</span> <span class="mi">400</span>

    <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">:</span>
        <span class="n">blockchain</span><span class="o">.</span><span class="n">register_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>

    <span class="n">response</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;New nodes have been added&#39;</span><span class="p">,</span>
        <span class="s1">&#39;total_nodes&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">node</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">blockchain</span><span class="o">.</span><span class="n">nodes</span><span class="p">],</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">response</span><span class="p">),</span> <span class="mi">201</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/nodes/resolve&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">consensus</span><span class="p">():</span>
    <span class="n">replaced</span> <span class="o">=</span> <span class="n">blockchain</span><span class="o">.</span><span class="n">resolve_conflicts</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">replaced</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Our chain was replaced&#39;</span><span class="p">,</span>
            <span class="s1">&#39;new_chain&#39;</span><span class="p">:</span> <span class="n">blockchain</span><span class="o">.</span><span class="n">chain</span>
        <span class="p">}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Our chain is authoritative&#39;</span><span class="p">,</span>
            <span class="s1">&#39;chain&#39;</span><span class="p">:</span> <span class="n">blockchain</span><span class="o">.</span><span class="n">chain</span>
        <span class="p">}</span>
    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">response</span><span class="p">),</span> <span class="mi">200</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/nodes/get&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">get_nodes</span><span class="p">():</span>
    <span class="n">nodes</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">blockchain</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;nodes&#39;</span><span class="p">:</span> <span class="n">nodes</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">response</span><span class="p">),</span> <span class="mi">200</span>
</code></pre></div>

<p><br></p>
<div style="display:block;margin:auto;height:80%;width:80%">
  <img src="/images/blockchain-manage-nodes.gif">
</div>

<p><br></p>
<h1>Conclusion</h1>
<p>In this blog post, we covered some core concepts behind blockchain and we learned how to implement one using Python. For the sake of simplicity, I didn't cover some technical details, for example: Wallet addresses and Merkel trees. If you want to learn more about the subject, I recommend reading the original Bitcoin white paper and follow up with <a href="https://en.bitcoin.it/wiki/Main_Page">bitcoin wiki</a> and Andreas Antonopoulos's excellent book: <a href="https://www.amazon.com/gp/product/1491954388/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1491954388&amp;linkCode=as2&amp;tag=adilmoujahid-20&amp;linkId=bd776f9224715e8a022d4984909d6a69">Mastering Bitcoin: Programming the Open Blockchain</a>.</p>
<h1>References</h1>
<ul>
<li>1 - <a href="https://en.wikipedia.org/wiki/Public-key_cryptography">Wikipedia - Public-key cryptography</a></li>
<li>2 - <a href="https://en.wikipedia.org/wiki/Hash_function">Wikipedia - Hash function</a></li>
<li>3 - <a href="https://bitcoin.stackexchange.com/questions/58687/what-happens-to-a-transaction-once-generated">Bitcoin Stackexchange - What happens to a transaction once generated?</a> </li>
<li>4 - <a href="https://en.bitcoin.it/wiki/Majority_attack">Bitcoin Wiki - Majority attack</a></li>
</ul>
            <div class="hr"></div>
            
            <!-- Begin MailChimp Signup Form -->
            <link href="//cdn-images.mailchimp.com/embedcode/slim-081711.css" rel="stylesheet" type="text/css">
            <style type="text/css">
                #mc_embed_signup{background:#F1F3F3; clear:left; font:14px Helvetica,Arial,sans-serif; }
                #mc-embedded-subscribe.button{background-color: #0f52ba;}
                /* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
                   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
            </style>
            <div id="mc_embed_signup">
            <form action="//adilmoujahid.us10.list-manage.com/subscribe/post?u=28846a375fbf5c13a93712283&amp;id=a45c6ff723" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
                <div id="mc_embed_signup_scroll">
                <label for="mce-EMAIL">Subscribe to my Data in Practice Newsletter</label>
                <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
                <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
                <div style="position: absolute; left: -5000px;"><input type="text" name="b_28846a375fbf5c13a93712283_a45c6ff723" tabindex="-1" value=""></div>
                <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
                </div>
            </form>
            </div>

            <!--End mc_embed_signup-->
            <a href="#" class="go-top">Go Top</a>
<div class="comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = "adilmoujahid"; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div><footer class="footer">
    <p>&copy; Adil Moujahid &ndash;
        Built with <a href="https://github.com/PurePelicanTheme/pure">Pure Theme</a>
        for <a href="http://blog.getpelican.com/">Pelican</a>
    </p>
</footer>        </div>
    </div>
</div>
    <script>
        var $top = $('.go-top');

        // Show or hide the sticky footer button
        $(window).scroll(function() {
            if ($(this).scrollTop() > 200) {
                $top.fadeIn(200);
            } else {
                $top.fadeOut(200);
            }
        });

        // Animate the scroll to top
        $top.click(function(event) {
            event.preventDefault();
            $('html, body').animate({scrollTop: 0}, 300);
        })

        // Makes sure that the href="#" attached to the <a> elements
        // don't scroll you back up the page.
        $('body').on('click', 'a[href="#"]', function(event) {
            event.preventDefault();
        });

        //Added on 2023-04-12 to fix the CSS of jupyter notebook (padding issue)
        document.addEventListener("DOMContentLoaded", function () {
            const inputPrompt = document.querySelector('.jp-InputPrompt.jp-InputArea-prompt');
            
            if (inputPrompt.textContent.trim() === '') {
                inputPrompt.classList.add('empty');
            } else {
                inputPrompt.classList.remove('empty');
            }
        });


    </script>
    <script type="text/javascript">
        var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
        document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
        try {
            var pageTracker = _gat._getTracker("UA-52651211-1");
            pageTracker._trackPageview();
            } catch(err) {}
    </script>
</body>

<script src="/js/blockchain.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/jquery.min.js"></script>
<script src="/js/spin.min.js"></script>
<script src="/js/ladda.min.js"></script>
<script src="/js/sha256.js"></script>

</html>