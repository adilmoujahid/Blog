title: Baseball Analytics: An Introduction to Sabermatics using Python
Slug: baseball-mathematics
Email: adil.mouja@gmail.com
Date: 2014-07-23
Category: analytics
Tags: python, modelling, scikit-learn
Summary: dfdfdfdfdfdfdfd


Sabermetrics is the apllication of statistics analysis to baseball data in order to measure in-game activity. The term Sabermetrics comes from saber (Society for American Baseball Research) and metrics (as in econometrics).

In 2003, Michael Lewis published Moneyball about Billy Beane, the Oakland Athletics General Manager since 1997. The book was centered around Billy Beane's use of Sabemetrics to indentify and recruit under-valued baseball players. With this strategy, his team could achieve as many wins as teams with more than double the payroll. The  Oakland Athletics made it to the play-offs 4 successive years: 2000,2001,2002,2003. In 2011, the movie Moneyball based on Lewis' book was released starring Brad Pitt in the role of Beane.

In this post, I will use Lahmanâ€™s Baseball Database and Python programming language to explain some of the techniques used in Sabermetrics. I will used 2 Python libraries: Pandas for data manipulation and analysis, Scipy for building statistical models.

A quick introduction to Baseball rules:

https://www.youtube.com/watch?v=0bKkGeROiPA

Machine setup and data download

Analytics 1 - Cleaning the dataset

------------------------------------------------------------------------------
2.8  Teams table

yearID         Year
lgID           League
teamID         Team
franchID       Franchise (links to TeamsFranchise table)
divID          Team's division
Rank           Position in final standings
G              Games played
GHome          Games played at home
W              Wins
L              Losses
DivWin         Division Winner (Y or N)
WCWin          Wild Card Winner (Y or N)
LgWin          League Champion(Y or N)
WSWin          World Series Winner (Y or N)
R              Runs scored
AB             At bats
H              Hits by batters
2B             Doubles
3B             Triples
HR             Homeruns by batters
BB             Walks by batters
SO             Strikeouts by batters
SB             Stolen bases
CS             Caught stealing
HBP            Batters hit by pitch
SF             Sacrifice flies
RA             Opponents runs scored
ER             Earned runs allowed
ERA            Earned run average
CG             Complete games
SHO            Shutouts
SV             Saves
IPOuts         Outs Pitched (innings pitched x 3)
HA             Hits allowed
HRA            Homeruns allowed
BBA            Walks allowed
SOA            Strikeouts by pitchers
E              Errors
DP             Double Plays
FP             Fielding  percentage
name           Team's full name
park           Name of team's home ballpark
attendance     Home attendance total
BPF            Three-year park factor for batters
PPF            Three-year park factor for pitchers
teamIDBR       Team ID used by Baseball Reference website
teamIDlahman45 Team ID used in Lahman database version 4.5
teamIDretro    Team ID used by Retrosheet


baseball: RS Runs scored; RA: Runs allowed

------------------------------
['yearID', 'teamID', 'Rank', 'R', 'RA', 'G', 'W', H', 'BB', 'HBP', 'AB','SF', 'HR', '2B', '3B'] 

OBP: On-base percentage
OBP = (H+BB+HBP)/(AB+BB+HBP+SF)
(Hits + Walks + Hit by Pitch) / (At Bats + Walks + Hit by Pitch + Sacrifice Flies)
http://www.homerunweb.com/onbase.html

SLG: Slugging Percentage
SLG = H + 2B + (2*3B) + (3*HR) / AB
[Hits] + [Doubles] + [Triples x 2] + [Home Runs x 3])/At Bats
	

SLG = (1B) + (2 * 2B) + (2 * 3B) + (4 * HR) / AB

u'DivWin', u'WCWin', u'LgWin', u'WSWin', u'3B',  u'SO', u'SB', u'CS',  u'ER', u'ERA', u'CG', u'SHO', u'SV', u'IPouts', u'HA', u'HRA', u'BBA', u'SOA', u'E', u'DP', u'FP', u'name', u'park', u'attendance', u'BPF', u'PPF', u'teamIDBR', u'teamIDlahman45', u'teamIDretro'], dtype='object')



------------------------------

baseball: RS,RA,W,OBP,SLG,BA,Playoffs,RankSeason,RankPlayoffs,G,OOBP,OSLG

http://www.baseball-reference.com/bullpen/slugging_percentage

Moneyball starting Brad Pitt.
Ockland A
Draw 